<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конвертер цветовых моделей</title>
    <style>
        :root {
            --primary-color: #10c0c0;
            --warning-color: #fc4f3c;
            --bg-color: #f9f9f9;
            --card-bg: #ffffff;
            --text-color: #3a3a3a;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .color-display {
            width: 100%;
            height: 100px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .color-models {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .model {
            flex: 1;
            min-width: 300px;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.03);
            border-radius: 5px;
        }

            .model h3 {
                text-align: center;
                margin-bottom: 15px;
            }

        .color-component {
            margin-bottom: 15px;
        }

            .color-component label {
                display: block;
                margin-bottom: 5px;
                font-weight: 500;
            }

        .input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="range"] {
            flex: 1;
        }

        input[type="number"] {
            width: 70px;
            padding: 5px;
        }

        .warning {
            color: var(--warning-color);
            font-size: 0.9em;
            display: none;
        }

        .palette-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            margin-top: 10px;
        }

        .color-swatch {
            aspect-ratio: 1;
            width: 100%;
            border-radius: 3px;
            cursor: pointer;
            border: 1px solid #ddd;
            transition: transform 0.1s;
        }

            .color-swatch:hover {
                transform: scale(1.1);
            }

        @media (max-width: 768px) {
            .color-models {
                flex-direction: column;
            }

            .model {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Конвертер цветовых моделей</h1>
        <div class="color-display" id="colorDisplay"></div>

        <div class="color-models">
            <!-- CMYK -->
            <div class="model">
                <h3>CMYK модель</h3>
                <div class="color-component">
                    <label>C (Голубой)</label>
                    <div class="input-group"><input type="range" id="c" min="0" max="100" value="0"><input type="number" id="cValue" min="0" max="100" value="0" step="0.1"></div>
                    <div class="warning" id="cWarning"></div>
                </div>
                <div class="color-component">
                    <label>M (Пурпурный)</label>
                    <div class="input-group"><input type="range" id="m" min="0" max="100" value="0"><input type="number" id="mValue" min="0" max="100" value="0" step="0.1"></div>
                    <div class="warning" id="mWarning"></div>
                </div>
                <div class="color-component">
                    <label>Y (Желтый)</label>
                    <div class="input-group"><input type="range" id="y" min="0" max="100" value="0"><input type="number" id="yValue" min="0" max="100" value="0" step="0.1"></div>
                    <div class="warning" id="yWarning"></div>
                </div>
                <div class="color-component">
                    <label>K (Черный)</label>
                    <div class="input-group"><input type="range" id="k" min="0" max="100" value="0"><input type="number" id="kValue" min="0" max="100" value="0" step="0.1"></div>
                    <div class="warning" id="kWarning"></div>
                </div>
            </div>

            <!-- LAB -->
            <div class="model">
                <h3>LAB модель</h3>
                <div class="color-component">
                    <label>L (Яркость)</label>
                    <div class="input-group"><input type="range" id="l" min="0" max="100" value="50"><input type="number" id="lValue" min="0" max="100" value="50" step="0.1"></div>
                    <div class="warning" id="lWarning"></div>
                </div>
                <div class="color-component">
                    <label>a (Зелёно-красный)</label>
                    <div class="input-group"><input type="range" id="a" min="-128" max="127" value="0"><input type="number" id="aValue" min="-128" max="127" value="0" step="0.1"></div>
                    <div class="warning" id="aWarning"></div>
                </div>
                <div class="color-component">
                    <label>b (Сине-жёлтый)</label>
                    <div class="input-group"><input type="range" id="b" min="-128" max="127" value="0"><input type="number" id="bValue" min="-128" max="127" value="0" step="0.1"></div>
                    <div class="warning" id="bWarning"></div>
                </div>
            </div>

            <!-- HSV -->
            <div class="model">
                <h3>HSV модель</h3>
                <div class="color-component">
                    <label>H (Оттенок)</label>
                    <div class="input-group"><input type="range" id="h" min="0" max="360" value="0"><input type="number" id="hValue" min="0" max="360" value="0"></div>
                    <div class="warning" id="hWarning"></div>
                </div>
                <div class="color-component">
                    <label>S (Насыщенность)</label>
                    <div class="input-group"><input type="range" id="s" min="0" max="100" value="0"><input type="number" id="sValue" min="0" max="100" value="0" step="0.1"></div>
                    <div class="warning" id="sWarning"></div>
                </div>
                <div class="color-component">
                    <label>V (Яркость)</label>
                    <div class="input-group"><input type="range" id="v" min="0" max="100" value="0"><input type="number" id="vValue" min="0" max="100" value="0" step="0.1"></div>
                    <div class="warning" id="vWarning"></div>
                </div>
            </div>
        </div>

        <h3>Палитра цветов</h3>
        <div class="palette-grid" id="palette"></div>
    </div>

    <script>
        const colorDisplay = document.getElementById('colorDisplay');
        const palette = document.getElementById('palette');

        let current = { c: 0, m: 0, y: 0, k: 0, l: 50, a: 0, b: 0, h: 0, s: 0, v: 0 };

        function clamp(v, min, max) { return Math.min(Math.max(v, min), max); }

        // CMYK <-> RGB
        function cmykToRgb(c, m, y, k) {
            c /= 100; m /= 100; y /= 100; k /= 100;
            return {
                r: Math.round(255 * (1 - c) * (1 - k)),
                g: Math.round(255 * (1 - m) * (1 - k)),
                b: Math.round(255 * (1 - y) * (1 - k))
            };
        }
        function rgbToCmyk(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const k = 1 - Math.max(r, g, b);
            if (k === 1) return { c: 0, m: 0, y: 0, k: 100 };
            const c = (1 - r - k) / (1 - k), m = (1 - g - k) / (1 - k), y = (1 - b - k) / (1 - k);
            return { c: c * 100, m: m * 100, y: y * 100, k: k * 100 };
        }

        // RGB <-> LAB via XYZ
        function rgbToXyz(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            [r, g, b] = [r, g, b].map(v => v > 0.04045 ? Math.pow((v + 0.055) / 1.055, 2.4) : v / 12.92);
            r *= 100; g *= 100; b *= 100;
            return {
                x: r * 0.4124 + g * 0.3576 + b * 0.1805,
                y: r * 0.2126 + g * 0.7152 + b * 0.0722,
                z: r * 0.0193 + g * 0.1192 + b * 0.9505
            };
        }
        function xyzToLab(x, y, z) {
            const ref = { x: 95.047, y: 100.0, z: 108.883 };
            x /= ref.x; y /= ref.y; z /= ref.z;
            [x, y, z] = [x, y, z].map(v => v > 0.008856 ? Math.cbrt(v) : (7.787 * v) + (16 / 116));
            return {
                l: (116 * y) - 16,
                a: 500 * (x - y),
                b: 200 * (y - z)
            };
        }
        function rgbToLab(r, g, b) {
            const xyz = rgbToXyz(r, g, b);
            return xyzToLab(xyz.x, xyz.y, xyz.z);
        }
        function labToXyz(l, a, b) {
            let y = (l + 16) / 116;
            let x = a / 500 + y;
            let z = y - b / 200;
            const ref = { x: 95.047, y: 100.0, z: 108.883 };
            const f = n => Math.pow(n, 3) > 0.008856 ? Math.pow(n, 3) : (n - 16 / 116) / 7.787;
            x = ref.x * f(x); y = ref.y * f(y); z = ref.z * f(z);
            return { x, y, z };
        }
        function xyzToRgb(x, y, z) {
            x /= 100; y /= 100; z /= 100;
            let r = x * 3.2406 + y * -1.5372 + z * -0.4986;
            let g = x * -0.9689 + y * 1.8758 + z * 0.0415;
            let b = x * 0.0557 + y * -0.2040 + z * 1.0570;
            [r, g, b] = [r, g, b].map(v => v > 0.0031308 ? 1.055 * Math.pow(v, 1 / 2.4) - 0.055 : v * 12.92);
            return {
                r: clamp(Math.round(r * 255), 0, 255),
                g: clamp(Math.round(g * 255), 0, 255),
                b: clamp(Math.round(b * 255), 0, 255)
            };
        }
        function labToRgb(l, a, b) {
            const xyz = labToXyz(l, a, b);
            return xyzToRgb(xyz.x, xyz.y, xyz.z);
        }

        // RGB <-> HSV
        function rgbToHsv(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            const d = max - min;
            let h, s, v = max;
            s = max === 0 ? 0 : d / max;
            if (max === min) h = 0;
            else {
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return { h: h * 360, s: s * 100, v: v * 100 };
        }
        function hsvToRgb(h, s, v) {
            h /= 60; s /= 100; v /= 100;
            const i = Math.floor(h), f = h - i;
            const p = v * (1 - s), q = v * (1 - s * f), t = v * (1 - s * (1 - f));
            let r, g, b;
            switch (i % 6) {
                case 0: r = v; g = t; b = p; break;
                case 1: r = q; g = v; b = p; break;
                case 2: r = p; g = v; b = t; break;
                case 3: r = p; g = q; b = v; break;
                case 4: r = t; g = p; b = v; break;
                case 5: r = v; g = p; b = q; break;
            }
            return { r: r * 255, g: g * 255, b: b * 255 };
        }

        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => Math.round(x).toString(16).padStart(2, '0')).join('');
        }

        function updateUIFromRgb(r, g, b) {
            const cmyk = rgbToCmyk(r, g, b);
            const lab = rgbToLab(r, g, b);
            const hsv = rgbToHsv(r, g, b);
            current = { ...cmyk, ...lab, ...hsv };
            colorDisplay.style.backgroundColor = rgbToHex(r, g, b);
            updateInputs();
        }

        function updateInputs() {
            for (const key in current) {
                const s = document.getElementById(key);
                const v = document.getElementById(key + "Value");
                if (s && v) { s.value = current[key]; v.value = current[key]; }
            }
        }

        function updateFromCmyk() {
            const rgb = cmykToRgb(current.c, current.m, current.y, current.k);
            updateUIFromRgb(rgb.r, rgb.g, rgb.b);
        }
        function updateFromLab() {
            const rgb = labToRgb(current.l, current.a, current.b);
            updateUIFromRgb(rgb.r, rgb.g, rgb.b);
        }
        function updateFromHsv() {
            const rgb = hsvToRgb(current.h, current.s, current.v);
            updateUIFromRgb(rgb.r, rgb.g, rgb.b);
        }

        function linkInputs(keys, fn) {
            keys.forEach(k => {
                document.getElementById(k).addEventListener('input', e => { current[k] = parseFloat(e.target.value); fn(); });
                document.getElementById(k + "Value").addEventListener('change', e => { current[k] = parseFloat(e.target.value); fn(); });
            });
        }

        function createPalette() {
            const colors = ['#FF0000', '#00FF00', '#0000FF', '#FFFF00', '#00FFFF', '#FF00FF',
                '#000000', '#444', '#888', '#CCC', '#FFF', '#FF8800', '#00FFAA', '#AA00FF'];
            colors.forEach(c => {
                const d = document.createElement('div');
                d.className = 'color-swatch'; d.style.background = c;
                d.onclick = () => { const rgb = hexToRgb(c); updateUIFromRgb(rgb.r, rgb.g, rgb.b); };
                palette.appendChild(d);
            });
        }
        function hexToRgb(hex) {
            const res = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return res ? { r: parseInt(res[1], 16), g: parseInt(res[2], 16), b: parseInt(res[3], 16) } : { r: 0, g: 0, b: 0 };
        }

        createPalette();
        linkInputs(['c', 'm', 'y', 'k'], updateFromCmyk);
        linkInputs(['l', 'a', 'b'], updateFromLab);
        linkInputs(['h', 's', 'v'], updateFromHsv);
        updateUIFromRgb(0, 128, 255);
    </script>
</body>
</html>
